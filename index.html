<!DOCTYPE html>
<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" type="image/png" href="image/favicon.png" sizes="42x42">

    <!-- Scatter js -->
    <script src="https://cdn.jsdelivr.net/npm/eosjs@16.0.9/lib/eos.min.js"></script>
    <script src="js/bundles/scatterjs-core.min.js"></script>
    <script src="js/bundles/scatterjs-plugin-eosjs.min.js"></script>
    <script src="js/bundles/scatterjs-plugin-lynx.min.js"></script>
   
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <!-- Jquery, jsdeliver & bootstrapJs -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</head>

<body>
    <!--contains the "header" with SOVDEX | BURN-MINER | TRADE-MINER, login button, and account name display on login-->
    <div class="container-fluid bg-dark shadow"> 
        <br> 
        <h1 class="row d-flex justify-content-center text-white">SOV<img src="image\SVXLOGOtransparentII.png" style="width: 50px; height: 50px;">DEX</h1>
          
        <h5 class="row d-flex justify-content-center text-white">销毁挖矿 | 交易挖矿</h5>
        <br>
        <div class="container" style="max-width: 576px">
            <button type="button" class="btn btn-primary btn-lg btn-block" id='buttontext' onclick='loginclick()'>登陆</button>
        </div>
        <br>
        <h4 id='accountname' class="text-center text-white">...</h4>
        <br>    
    </div>
    <!-- end of "header"--> 
            
    <!--this container basically contains the rest of the dapp, the rest of the containers and rows fit inside this one-->
    <div class="container" style="max-width: 576px">

        <!-- vanishing button to initialize SVX for trading and mining -->   
    <div class="d-flex mt-1 mb-1 justify-content-center">
        <button type="button" id='doinit' class='btn btn-block btn-outline-success btn-sm' onclick='doinit()'>单击此处初始化SVX挖矿</button>
    </div>
    <!-- end of vanishing button to initialize SVX for trading and mining -->
        

        <!--SOV and SVX Balance Display directly beneath "header"-->
        <div class="row row-cols-2">
            <h6 class='col text-center'>
                SOV 余额
                <div id='sov_balance'>...</div>
            </h6>
            <h6 class='col text-center'>
                SVX 余额
                <div id='svx_balance'>...</div>
            </h6>
        </div>
        <br>
        <!-- end of Balance Display -->


        <!--This is the div / row set with the CPU and NET and SVX Node circles for user experience and feedback-->
        <div class="row">
            <div class="col">
                <svg viewbox="0, 0, 400, 400">
                    <circle id='kreis' cx="200" cy="200" r="120" stroke="#eeeeee" stroke-width="30" fill="#ffffff" /> 
                    <path id='mycpu' d="" fill="none" stroke="#55ff55" stroke-width="30"   stroke-linecap="round"  />
                    <text id='mycpu_text' x='200' y='190' text-anchor="middle" font-size='70'>0%</text>
                    <text id='mycpu_text' x='200' y='260' text-anchor="middle" font-size='70'>CPU</text>
                </svg>
            </div>

            <div class="col">
                <svg viewbox="0, 0, 400, 400">
                    <circle id='kreis' cx="200" cy="200" r="120" stroke="#eeeeee" stroke-width="30" fill="#ffffff" /> 
                    <path id='mynode' d="" fill="none" stroke="#55ff55" stroke-width="30"   stroke-linecap="round"  />
                    <text id='mynode_text' x='200' y='188' text-anchor="middle" font-size='65'>SVX</text>
                    <text id='mynode_text' x='200' y='252' text-anchor="middle" font-size='65'>NODE</text>
                </svg>
            </div>
                
            <div class="col">
                <svg viewbox="0, 0, 400, 400">
                    <circle id='kreis' cx="200" cy="200" r="120" stroke="#eeeeee" stroke-width="30" fill="#ffffff" /> 
                    <path id='mynet' d="" fill="none" stroke="#55ff55" stroke-width="30"   stroke-linecap="round"  />
                    <text id='mynet_text' x='200' y='190' text-anchor="middle" font-size='70'>0%</text>
                    <text id='mynet_text' x='200' y='260' text-anchor="middle" font-size='70'>NET</text>
                </svg>
            </div>
        </div>
        <!-- end of CPU and NET circles -->
        <br>

      
        
        <nav>
            <div class="nav nav-pills nav-fill" id="nav-tab" role="tablist">
                <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-STAKER" role="tab" aria-controls="nav-STAKER" aria-selected="true">抵押</a>
                <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-TRADER" role="tab" aria-controls="nav-TRADER" aria-selected="false">交换</a>
                <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-MINER" role="tab" aria-controls="nav-MINER" aria-selected="false">挖矿</a>
            </div>
        </nav>
        

        <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-STAKER" role="tabpanel" aria-labelledby="nav-STAKER-tab">
        <br>

          <!-- SVX Node Requirement Information -->
        <h6 id='nodeRequirement' class="text-center">...</h6>
        <!-- End of SVX Node Requirement Information -->


        <!--another container inside the initial one, this is for staking and unstaking SVX-->
        <div class="container border border-primary rounded bg-dark shadow">
            <div class="row row-cols-2 mb-1">
                <p class="col text-center text-white">
                    &nbsp;抵押SVX
                        <br>
                <input class="text-center form-control border-0" type='text' id='svx_stake_balance' readonly="readonly" value=''>
                </p>
                <p class="col text-center text-white">
                    &nbsp;赎回SVX 
                        <br>         
                    <input class="text-center form-control border-0" type='text' id='svx_unstaking_balance' readonly="readonly" value=''>
                    <small id='svx_unstake_time'></small>
                </p>
            </div>
        
            <div class="row row-cols-2">
                <div class="col text-center">
                    <input class="text-center form-control mb-1" type='number' min="0" step="1" id='svx_to_stake'>
                    <button class="btn btn-primary btn-lg btn-block shadow" id='stakebutton' onclick='svx_to_stake_action()'>抵押SVX</button>
                </div>
                <div class="col text-center">
                    <input class="text-center form-control mb-1" type='number' min="0" step="1" id='svx_to_unstake'>
                    <button class="btn btn-primary btn-lg btn-block shadow" id='stakebutton' onclick='svx_to_unstake_action()'>赎回SVX</button> 
                </div>
            </div>

            <div class="text-center text-white">
                <small> &nbsp;抵押SVX获得采矿奖金，费用折扣和奖励</small>
            </div>
        </div>  <!--end of staking / unstaking container-->
    </div>

        <div class="tab-pane fade" id="nav-TRADER" role="tabpanel" aria-labelledby="nav-TRADER-tab">
        <br>

        <h6 id='svxDiscount' class="text-center">...</h6>

             <!--this cointains the trading box and all it's info-->
        <div class="container border border-primary rounded bg-dark shadow">
        <br>
            <nav>
                <div class="nav nav-pills nav-justified" id="nav-tab" role="tablist">
                    <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-PBTC" role="tab" aria-controls="nav-PBTC" aria-selected="true">EOS|PBTC</a>
                    <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-EOS" role="tab" aria-controls="nav-EOS" aria-selected="true">SOV|EOS</a>
                    <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-USDT" role="tab" aria-controls="nav-USDT" aria-selected="false">SOV|USDT</a>
                    <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-SVXEOS" role="tab" aria-controls="nav-SVXEOS" aria-selected="false">SVX|EOS</a>
                </div>
            </nav>
            <br>
            <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade show active" id="nav-PBTC" role="tabpanel" aria-labelledby="nav-PBTC-tab">
                    
                    <h6 class="text-center text-white">EOS/pBTC 交易余额</h6>
                    <row class="d-flex justify-content-around">
                        <small id="PBTCBALANCE" class="col text-center text-light">...</small>
                        <small id= "balance2" class="col text-light text-center">...</small>
                    </row>  

                    <div class="row row-cols-2">
                        <div class="col text-center">
                            <input class="text-center form-control mb-1" type='number' id='pbtc_transfer_amount' min="0" value= '0.0001' step=".00001">
                            <button class="btn btn-success btn-lg btn-block shadow" onclick='buyEOSPBTC()'>发送pBTC<br>买入EOS/pBTC</button>
                            <small class="text-center text-white">收到</small>
                            <small class="text-center text-warning" id="buyeospbtcBancorDiv">...</small>
                            <small class="text-center text-white">EOS 收费前</small>
                            <br>
                            <br>
                            <br>
                                <div>
                                    <p id="BUYEOSPBTCAVGPRICE" class="d-flex justify-content-center text-light" style="font-size:80%;">...</p>
                                </div>
                                
                        </div>

                        <div class="col text-center">
                            <input class="text-center form-control mb-1" type='number' id='eos_transfer_amount2' min="0" value='1' step=".01">
                            <button class="btn btn-danger btn-lg btn-block shadow" onclick='sellEOSPBTC()'>发送EOS<br>卖出EOS/pBTC</button> 
                            <small class="text-center text-white">收到</small>
                            <small class="text-center text-warning" id="selleospbtcBancorDiv">...</small>
                            <small class="text-center text-white">pBTC 收费前</small>
                            <br>
                            <br>
                            <br>
                                <div>
                                    <p id="SELLEOSPBTCAVGPRICE" class="d-flex justify-content-center text-light" style="font-size:80%;">...</p>
                                </div>
                                
                        </div>
                    </div>
                    <div>
                        <p id="EOSPBTCPRICE" class="d-flex justify-content-center text-light">...</p>
                    </div>
                </div>

                <div class="tab-pane fade" id="nav-EOS" role="tabpanel" aria-labelledby="nav-EOS-tab">
                    <h6 class="text-center text-white">SOV/EOS交易余额</h6>
                    <row class="d-flex justify-content-around">
                        <small id="balance" class="col text-center text-light">...</small>
                        <small id= "SOVBALANCE" class="col text-light text-center">...</small>
                    </row>  

                    <div class="row row-cols-2">
                        <div class="col text-center">
                            <input class="text-center form-control mb-1" type='number' id='eos_transfer_amount' min="0" value= '1' step=".01">
                            <button class="btn btn-success btn-lg btn-block shadow" onclick='buySOVEOS()'>发送EOS<br>买入SOV/EOS</button>
                            <small class="text-center text-white">收到</small>
                            <small class="text-center text-warning" id="buysoveosBancorDiv">...</small>
                            <small class="text-center text-white">SOV 收费前</small>
                            <br>
                            <br>
                            <small class="text-center text-white" id="buysoveosMiningRateDiv">...</small>
                            <br>
                            
                                <div>
                                    <p id="BUYSOVEOSAVGPRICE" class="d-flex justify-content-center text-light" style="font-size:80%;">...</p>
                                </div>
                        </div>

                        <div class="col text-center">
                            <input class="text-center form-control mb-1" type='number' id='sov_transfer_amount' min="0" value='350'>
                            <button class="btn btn-danger btn-lg btn-block shadow" onclick='sellSOVEOS()'>发送SOV<br>卖出SOV/EOS</button>  
                            <small class="text-center text-white">收到</small>
                            <small class="text-center text-warning" id="sellsoveosBancorDiv">...</small>
                            <small class="text-center text-white">EOS 收费前</small>
                            <br>
                            <br>
                            <small class="text-center text-white" id="sellsoveosMiningRateDiv">...</small>
                            <br>
                            
                            <div>
                                <p id="SELLSOVEOSAVGPRICE" class="d-flex justify-content-center text-light" style="font-size:80%;">...</p>
                            </div>
                        </div>
                    </div>

                    <div>
                        <p id="SOVEOSPRICE" class="d-flex justify-content-center text-light">...</p>
                    </div>
                </div>

                <div class="tab-pane fade" id="nav-USDT" role="tabpanel" aria-labelledby="nav-USDT-tab">
                    <h6 class="text-center text-white">SOV/USDT交易余额</h6>
                    <row class="d-flex justify-content-around">
                        <small id="USDTBALANCE" class="col text-center text-light">...</small>
                        <small id= "SOVUSDTBALANCE" class="col text-light text-center">...</small>
                    </row> 

                    <div class="row row-cols-2">
                        <div class="col text-center">
                            <input class="text-center form-control mb-1" type='number' id='usdt_transfer_amount' min="0" value= '1'>
                            <button class="btn btn-success btn-lg btn-block shadow" onclick='buySOVUSDT()'>发送USDT<br>买入SOV/USDT</button>
                            <small class="text-center text-white">收到</small>
                            <small class="text-center text-warning" id="buysovusdtBancorDiv">...</small>
                            <small class="text-center text-white">SOV 收费前</small>
                            <br>
                            <br>
                            <small class="text-center text-white" id="buysovusdtMiningRateDiv">...</small>
                            <br>
        
                            <div>
                                <p id="BUYSOVUSDTAVGPRICE" class="d-flex justify-content-center text-light" style="font-size:80%;">...</p>
                            </div>
                        </div>

                        <div class="col text-center">
                            <input class="text-center form-control mb-1" type='number' id='sov_transfer_amount10' min="0" value='350'>
                            <button class="btn btn-danger btn-lg btn-block shadow" onclick='sellSOVUSDT()'>发送SOV<br>卖出SOV/USDT</button> 
                            <small class="text-center text-white">收到</small>
                            <small class="text-center text-warning" id="sellsovusdtBancorDiv">...</small>
                            <small class="text-center text-white">USDT 收费前</small>
                            <br>
                            <br>
                            <small class="text-center text-white" id="sellsovusdtMiningRateDiv">...</small>
                            <br>
                            
                                <div>
                                    <p id="SELLSOVUSDTAVGPRICE" class="d-flex justify-content-center text-light" style="font-size:80%;">...</p>
                                </div>
                        </div>
                    </div>
                    <div>
                        <p id="SOVUSDTPRICE" class="d-flex justify-content-center text-light">...</p>
                    </div>
                </div>
  
                <div class="tab-pane fade" id="nav-SVXEOS" role="tabpanel" aria-labelledby="nav-SVXEOS-tab">
                    <h6 class="text-center text-white">SVX/EOS交易余额</h6>
                    <row class="d-flex justify-content-around">
                        <small id="balance1" class="col text-center text-light">...</small>
                        <small id= "SVXBALANCE" class="col text-light text-center">...</small>
                    </row>  
                    <div class="row row-cols-2">
                        <div class="col text-center">
                            <input class="text-center form-control mb-1" type='number' id='eos_transfer_amount1' min="0" value= '1' step=".01">
                            <button class="btn btn-success btn-lg btn-block shadow" onclick='buySVXEOS()'>发送EOS<br>买入SVX/EOS</button>
                            <small class="text-center text-white">收到</small>
                            <small class="text-center text-warning" id="buysvxeosBancorDiv">...</small>
                            <small class="text-center text-white">SVX 收费前</small>
                            <br>
                            <br>
                            <br>                  
                                <div>
                                    <p id="BUYSVXEOSAVGPRICE" class="d-flex justify-content-center text-light" style="font-size:80%;">...</p>
                                </div>
                            </div>

                            <div class="col text-center">
                                <input class="text-center form-control mb-1" type='number' id='svx_transfer_amount' min="0" value='350'>
                                <button class="btn btn-danger btn-lg btn-block shadow" onclick='sellSVXEOS()'>发送SVX<br>卖出SVX/EOS</button> 
                                <small class="text-center text-white">收到</small>
                                <small class="text-center text-warning" id="sellsvxeosBancorDiv">...</small>
                                <small class="text-center text-white">EOS 收费前</small>
                                <br>
                                <br>
                                <br>
                                <div>
                                    <p id="SELLSVXEOSAVGPRICE" class="d-flex justify-content-center text-light" style="font-size:80%;">...</p>
                                </div>                   
                            </div>
                        </div>
                        <div>
                            <p id="SVXEOSPRICE" class="d-flex justify-content-center text-light">...</p>
                        </div>
                    </div>
                </div>
                <div class="text-center text-warning">
                    <small> &nbsp;小订单的滑点少于大订单</small>
                </div>
                <br>
            </div>
            <!--end of trading box-->
        </div>

        <div class="tab-pane fade" id="nav-MINER" role="tabpanel" aria-labelledby="nav-MINER-tab">

        <br>   
        <h6 id='svx_bonus' class="text-center">...</h6>

        <!-- detailed miner information box -->
        <div class="container bg-dark border border-primary rounded shadow">  
            <p id='svxMiningRate' class="text-center text-white mt-3">...</p>
            <p id='totalSVXMiningRate' class="text-center text-white">...</p>
            <p id='svxMiningMultiplier' class="text-center text-white">...</p>
            <p id='svxMiningBurn' class="text-center text-white">...</p>
        </div>
        <!-- end of detailed miner information box -->
        <br>
        
        <!-- box for mining cost in sov -->
        <div class="container bg-dark border border-warning rounded shadow"> 
            <p id='svxMiningCost' class="text-center text-white mt-3">...</p>
        </div>
        <!-- end of box for mining cost in sov -->
        <br>

        <!--miner / autominer inputs and info-->
        <div class='d-flex mt-1'>
            <h6>每次采矿行动发送的SOV数量:</h6>
            <input type='number' min="150" class='text-center form-control ml-3' id='sov_burn_amount' value='150'>
        </div>

        <div class="text-center">
            <small class="text-center text-primar">未燃烧的SOV自动退还</small>
        </div>
        <br>

        <div class='d-flex mt-1'>
            <h6>一次行动奖励后的矿井 ≥</h6>
            <input type='number' min="0" step="0.01" class='text-center form-control ml-3' id='target_mining_rate' value='0'>
        </div>

        <!--this is the little blocks that update by consecutively turning black one at a time when you are mining so that the user understands it is working-->    
        <div style='width:100%;margin-left:0;margin-right:0;margin-top:10px;height:25px;border:none;'>
            <svg viewbox="0, 0, 400, 10">
                <rect id='rect1'  x="0" y="0" width="38" height="10" fill='#cccccc' />
                <rect id='rect2'  x="40" y="0" width="38" height="10" fill='#cccccc' />
                <rect id='rect3'  x="80" y="0" width="38" height="10" fill='#cccccc' />
                <rect id='rect4'  x="120" y="0" width="38" height="10" fill='#cccccc' />
                <rect id='rect5'  x="160" y="0" width="38" height="10" fill='#cccccc' />
                <rect id='rect6'  x="200" y="0" width="38" height="10" fill='#cccccc' />
                <rect id='rect7'  x="240" y="0" width="38" height="10" fill='#cccccc' />
                <rect id='rect8'  x="280" y="0" width="38" height="10" fill='#cccccc' />
                <rect id='rect9'  x="320" y="0" width="38" height="10" fill='#cccccc' />
                <rect id='rect10' x="360" y="0" width="38" height="10" fill='#cccccc' />
            </svg>
        </div>
        <!-- end of little blocks for miner feedback -->

        <div class="row">
            <div class="custom-control custom-checkbox m-4">
                <input type='checkbox' class="custom-control-input" id='checkbox-3' onclick='switch_autominer(this)'>
                <label class="custom-control-label" for='checkbox-3' style='font-size:16px;'>自动采矿</label>
            </div>
        
        <button type="button" class="btn btn-primary btn-block border border-dark col m-3 shadow" id='dotransaction_bundle' onclick='dotransaction_bundle()'>矿 X 1</button>  
        </div>


        <div class="slidecontainer" style='width:100%;'>
            <input type="range" min="1" max="200" step="1.0" class="slider" value='1' id="myRange" oninput="showVal(this.value)" onchange="showVal(this.value)">
        </div>

        <div class="text-center">
            <small>每笔交易的捆绑采矿动作</small>
        </div>

        <div class="text-center">
            <small>*转移时SOV燃烧。负责任的采矿和贸易</small>
        </div>
        <!-- end ofminer / autominer inputs and info-->
    </div>
</div>
<br>

<!-- resources dropdown / input to purchase EOS resources with SOV -->

<h6 id='resourcesInfo' class="text-center">...</h6>
        
        <div class="container bg-dark border border-primary rounded shadow"> 
            <br>
            <div class="input-group">
                <input type="number" placeholder="输入SOV金额" min="1" class="form-control" aria-label="Number input with dropdown button" id="sovresourcesInput">
                <div class="dropup input-group-prepend">
                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">网络资源</button>                
                    <div class="dropdown-menu">
                        <a class="dropdown-item" onclick="rentCPUSOV()">租用CPU</a>
                        <a class="dropdown-item" onclick="rentNETSOV()">租用NET</a>
                        <a class="dropdown-item" onclick="buyRAMSOV()">购买RAM</a>
                        <a class="dropdown-item">取消</a>
                    </div>
                </div>
            </div>
            <br>
        </div>
        <br>
        <!-- end of resources feature -->

    <!--node changing button / input area-->
    <div class="input-group mb-2 shadow">
        <div class="input-group-prepend">
            <button id='nodebutton' class='btn btn-primary' type="button" onclick='change_node_click()'>变更节点</button>
        </div>
        <input id='scatter_host' class="text-center form-control" type='text' aria-describedby="basic-addon1" value=''>
    </div>
    <br>
    <!-- end of node changing button / input area -->
</div> <!--closes the main container-->
                    
<script>
    var init_node = "eu1.eosdac.io";
    document.getElementById('scatter_host').value = init_node;
</script>

<script type="text/javascript" src="js/main.js"></script>           
</body>
</html>



